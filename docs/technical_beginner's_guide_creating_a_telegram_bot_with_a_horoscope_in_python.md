# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö: –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ —Å –≥–æ—Ä–æ—Å–∫–æ–ø–æ–º –Ω–∞ Python

---

## –í–≤–µ–¥–µ–Ω–∏–µ

–í —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –º—ã —à–∞–≥ –∑–∞ —à–∞–≥–æ–º —Å–æ–∑–¥–∞–¥–∏–º Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ –∏ –¥–∞—Ç—É —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø, –∏—Å–ø–æ–ª—å–∑—É—è –ø—É–±–ª–∏—á–Ω–æ–µ API.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞](#—à–∞–≥-1-—Å–æ–∑–¥–∞–Ω–∏–µ-telegram-–±–æ—Ç–∞-–∏-–ø–æ–ª—É—á–µ–Ω–∏–µ-—Ç–æ–∫–µ–Ω–∞)
2. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#—à–∞–≥-2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-—Ä–∞–±–æ—á–µ–≥–æ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
3. [–ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ –±–æ—Ç–∞](#—à–∞–≥-3-–Ω–∞–ø–∏—Å–∞–Ω–∏–µ-–∫–æ–¥–∞-–±–æ—Ç–∞)
4. [–ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞](#—à–∞–≥-4-–∑–∞–ø—É—Å–∫-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–±–æ—Ç–∞)
5. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)

---

## –®–∞–≥ 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

1. –í Telegram –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ [BotFather](https://core.telegram.org/file/811140253/1/tVdi9Kvdrp0.52332/original).
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /newbot.
3. –ó–∞–¥–∞–π—Ç–µ –∏–º—è –∏ username (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ bot, –Ω–∞–ø—Ä–∏–º–µ—Ä myhorobot).
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω.


---

## –®–∞–≥ 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 2.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Python

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Python:

python --version

–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–∫–∞—á–∞–π—Ç–µ —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞](https://python.org).

---

### 2.2 –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

python -m venv venv

–ê–∫—Ç–∏–≤–∞—Ü–∏—è:

- Windows:

    venv\Scripts\activate
  

- Linux/macOS:

    source venv/bin/activate
  

---

### 2.3 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫

pip install pyTelegramBotAPI python-dotenv requests

---

### 2.4 –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env

BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∏–∑_BotFather

---

## –®–∞–≥ 3. –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ –±–æ—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª main.py

```python
from dotenv import load_dotenv
from pathlib import Path
from telebot import TeleBot, types
import os
import requests
```
### –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–∞ –∏–∑ .env
```python
dotenv_path = Path(__file__).parent / ".env"
load_dotenv(dotenv_path=dotenv_path)
BOT_TOKEN = os.getenv('BOT_TOKEN')

if not BOT_TOKEN:
    raise ValueError("BOT_TOKEN is not set. Check your .env file.")

bot = TeleBot(BOT_TOKEN)
```
### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
```python
bot.set_my_commands([
    types.BotCommand("start", "–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º"),
    types.BotCommand("hello", "–ü–æ–∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è —Å –±–æ—Ç–æ–º"),
    types.BotCommand("horoscope", "–ü–æ–ª—É—á–∏—Ç—å –≥–æ—Ä–æ—Å–∫–æ–ø"),
])
```
### –°–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞–∫–æ–≤
```python
ZODIAC_SIGNS = {
    "–û–≤–µ–Ω": "Aries",
    "–¢–µ–ª–µ—Ü": "Taurus",
    "–ë–ª–∏–∑–Ω–µ—Ü—ã": "Gemini",
    "–†–∞–∫": "Cancer",
    "–õ–µ–≤": "Leo",
    "–î–µ–≤–∞": "Virgo",
    "–í–µ—Å—ã": "Libra",
    "–°–∫–æ—Ä–ø–∏–æ–Ω": "Scorpio",
    "–°—Ç—Ä–µ–ª–µ—Ü": "Sagittarius",
    "–ö–æ–∑–µ—Ä–æ–≥": "Capricorn",
    "–í–æ–¥–æ–ª–µ–π": "Aquarius",
    "–†—ã–±—ã": "Pisces",
}

DAYS = ["TODAY", "TOMORROW", "YESTERDAY"]
```
### –ö–æ–º–∞–Ω–¥–∞ /start –∏ /hello
```python
@bot.message_handler(commands=['start', 'hello'])
def send_welcome(message):
    bot.send_message(message.chat.id, "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç-–≥–æ—Ä–æ—Å–∫–æ–ø ‚ú®\n–ù–∞–ø–∏—à–∏ /horoscope —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑.")
```
### –ö–æ–º–∞–Ω–¥–∞ /horoscope
```python
@bot.message_handler(commands=['horoscope'])
def horoscope_handler(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
    for sign in ZODIAC_SIGNS.keys():
        markup.add(sign)
    bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞:", reply_markup=markup)
    bot.register_next_step_handler(message, ask_day)

def ask_day(message):
    user_sign = message.text
    if user_sign not in ZODIAC_SIGNS:
        bot.send_message(message.chat.id, "‚ùóÔ∏è –ù–µ–≤–µ—Ä–Ω—ã–π –∑–Ω–∞–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —Å /horoscope")
        return
    sign_en = ZODIAC_SIGNS[user_sign]

    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
    markup.row("TODAY", "TOMORROW", "YESTERDAY")
    bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–Ω—å:", reply_markup=markup)
    bot.register_next_step_handler(message, fetch_horoscope, sign_en)

def fetch_horoscope(message, sign_en):
    day = message.text.upper()
    if day not in DAYS:
        bot.send_message(message.chat.id, "‚ùóÔ∏è –ù–µ–≤–µ—Ä–Ω—ã–π –¥–µ–Ω—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —Å /horoscope")
        return

    horoscope = get_daily_horoscope(sign_en, day)

    if "error" in horoscope:
        bot.send_message(message.chat.id, "üö´ –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≥–æ—Ä–æ—Å–∫–æ–ø–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")
        return

    data = horoscope["data"]
    text = f"üîÆ *–ì–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è {sign_en}*\nüìÖ *{data['date']}*\n\n_{data['horoscope_data']}_"
    bot.send_message(message.chat.id, text, parse_mode="Markdown")
```
### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API
```python
def get_daily_horoscope(sign: str, day: str) -> dict:
    url = "https://horoscope-app-api.vercel.app/api/v1/get-horoscope/daily"
    params = {"sign": sign, "day": day}
    try:
        response = requests.get(url, params=params, timeout=5)
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as e:
        return {"error": str(e)}
```
### –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```python
@bot.message_handler(func=lambda msg: True)
def echo_all(message):
    bot.reply_to(message, "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –ù–∞–ø–∏—à–∏—Ç–µ /horoscope –¥–ª—è –≥–æ—Ä–æ—Å–∫–æ–ø–∞.")
```
### –ó–∞–ø—É—Å–∫
```python
bot.infinity_polling()
```
---

## –®–∞–≥ 4. –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

python main.py

–û—Ç–∫—Ä–æ–π—Ç–µ Telegram, –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ /start –∏ —Å–ª–µ–¥—É–π—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

src/
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ .env


---

### –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

sequenceDiagram
    participant User
    participant Bot
    participant API

    User->>Bot: /horoscope
    Bot->>User: –í–≤–æ–¥ –∑–Ω–∞–∫–∞
    User->>Bot: Aries
    Bot->>User: –í–≤–æ–¥ –¥–Ω—è
    User->>Bot: Today
    Bot->>API: –ó–∞–ø—Ä–æ—Å –≥–æ—Ä–æ—Å–∫–æ–ø–∞
    API-->>Bot: –ì–æ—Ä–æ—Å–∫–æ–ø
    Bot->>User: –û—Ç–≤–µ—Ç —Å –≥–æ—Ä–æ—Å–∫–æ–ø–æ–º

---

### –ü–æ—Ç–æ–∫–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞

flowchart TD
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç /horoscope] --> B[–ë–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∑–Ω–∞–∫]
    B --> C[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∑–Ω–∞–∫]
    C --> D[–ë–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞—Ç—É]
    D --> E[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞—Ç—É]
    E --> F[–ë–æ—Ç –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API]
    F --> G[–ü–æ–ª—É—á–∞–µ—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç –≥–æ—Ä–æ—Å–∫–æ–ø]

---

