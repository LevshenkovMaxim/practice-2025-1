<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</title>
    <link rel="icon" href="images/logo.png" type="image">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <header>
        <h1>–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö: –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ —Å –≥–æ—Ä–æ—Å–∫–æ–ø–æ–º –Ω–∞ Python</h1>
    </header>


<section id="introduction">
    <h2 id="–≤–≤–µ–¥–µ–Ω–∏–µ">–í–≤–µ–¥–µ–Ω–∏–µ</h2>
    <p>–í —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –º—ã —à–∞–≥ –∑–∞ —à–∞–≥–æ–º —Å–æ–∑–¥–∞–¥–∏–º Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ –∏ –¥–∞—Ç—É —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø, –∏—Å–ø–æ–ª—å–∑—É—è –ø—É–±–ª–∏—á–Ω–æ–µ API.</p>
</section>

<section id="contents">
    <h2 id="—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</h2>
    <ol>
        <li><a href="#%D1%88%D0%B0%D0%B3-1-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-telegram-%D0%B1%D0%BE%D1%82%D0%B0-%D0%B8-%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D1%82%D0%BE%D0%BA%D0%B5%D0%BD%D0%B0">–°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞</a></li>
        <li><a href="#%D1%88%D0%B0%D0%B3-2-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è</a></li>
        <li><a href="#%D1%88%D0%B0%D0%B3-3-%D0%BD%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%B4%D0%B0-%D0%B1%D0%BE%D1%82%D0%B0">–ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ –±–æ—Ç–∞</a></li>
        <li><a href="#%D1%88%D0%B0%D0%B3-4-%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-%D0%B8-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B1%D0%BE%D1%82%D0%B0">–ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞</a></li>
        <li><a href="#%D0%B0%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0-%D0%B8-%D0%B2%D0%B8%D0%B7%D1%83%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</a></li>
    </ol>
</section>

<section id="step1">
    <h2 id="—à–∞–≥-1-—Å–æ–∑–¥–∞–Ω–∏–µ-telegram-–±–æ—Ç–∞-–∏-–ø–æ–ª—É—á–µ–Ω–∏–µ-—Ç–æ–∫–µ–Ω–∞">–®–∞–≥ 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞</h2>
    <ol>
        <li>–í Telegram –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ <a href="https://core.telegram.org/file/811140253/1/tVdi9Kvdrp0.52332/original">BotFather</a>.</li>
        <li>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /newbot.</li>
        <li>–ó–∞–¥–∞–π—Ç–µ –∏–º—è –∏ username (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ bot, –Ω–∞–ø—Ä–∏–º–µ—Ä myhorobot).</li>
        <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω.</li>
    </ol>
</section>

<section id="step2">
    <h2 id="—à–∞–≥-2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-—Ä–∞–±–æ—á–µ–≥–æ-–æ–∫—Ä—É–∂–µ–Ω–∏—è">–®–∞–≥ 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è</h2>
    <h3 id="21-–ø—Ä–æ–≤–µ—Ä–∫–∞-–∏–ª–∏-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-python">2.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Python</h3>
    <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Python:</p>
    <p>python --version</p>
    <p>–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–∫–∞—á–∞–π—Ç–µ —Å <a href="https://python.org">–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞</a>.</p>
    <h3 id="22-—Å–æ–∑–¥–∞–Ω–∏–µ-–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ-–æ–∫—Ä—É–∂–µ–Ω–∏—è">2.2 –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è</h3>
    <p>python -m venv venv</p>
    <p>–ê–∫—Ç–∏–≤–∞—Ü–∏—è:</p>
    <ul>
    <li>
        <p>Windows:</p>
        <p>venv\Scripts\activate</p>
    </li>
    <li>
        <p>Linux/macOS:</p>
        <p>source venv/bin/activate</p>
    </li>
    </ul>

    <h3 id="23-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫">2.3 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫</h3>
    <p>pip install pyTelegramBotAPI python-dotenv requests</p>

    <h3 id="24-—Å–æ–∑–¥–∞–Ω–∏–µ-—Ñ–∞–π–ª–∞-env">2.4 –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env</h3>
    <p>BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∏–∑_BotFather</p>
</section>


<section id="step3">
    <h2 id="—à–∞–≥-3-–Ω–∞–ø–∏—Å–∞–Ω–∏–µ-–∫–æ–¥–∞-–±–æ—Ç–∞">–®–∞–≥ 3. –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ –±–æ—Ç–∞</h2>
    <p>–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª main.py</p>
    <pre><code class="language-python">from dotenv import load_dotenv
    from pathlib import Path
    from telebot import TeleBot, types
    import os
    import requests
    </code></pre>
    <h3 id="–∑–∞–≥—Ä—É–∑–∫–∞-—Ç–æ–∫–µ–Ω–∞-–∏–∑-env">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–∞ –∏–∑ .env</h3>
    <pre><code class="language-python">dotenv_path = Path(__file__).parent / &quot;.env&quot;
    load_dotenv(dotenv_path=dotenv_path)
    BOT_TOKEN = os.getenv(&#39;BOT_TOKEN&#39;)

    if not BOT_TOKEN:
        raise ValueError(&quot;BOT_TOKEN is not set. Check your .env file.&quot;)

    bot = TeleBot(BOT_TOKEN)
    </code></pre>
    <h3 id="–∫–æ–º–∞–Ω–¥—ã-–±–æ—Ç–∞">–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞</h3>
    <pre><code class="language-python">bot.set_my_commands([
        types.BotCommand(&quot;start&quot;, &quot;–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º&quot;),
        types.BotCommand(&quot;hello&quot;, &quot;–ü–æ–∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è —Å –±–æ—Ç–æ–º&quot;),
        types.BotCommand(&quot;horoscope&quot;, &quot;–ü–æ–ª—É—á–∏—Ç—å –≥–æ—Ä–æ—Å–∫–æ–ø&quot;),
    ])
    </code></pre>
    <h3 id="—Å–ø–∏—Å–æ–∫-–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö-–∑–Ω–∞–∫–æ–≤">–°–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞–∫–æ–≤</h3>
    <pre><code class="language-python">ZODIAC_SIGNS = {
        &quot;–û–≤–µ–Ω&quot;: &quot;Aries&quot;,
        &quot;–¢–µ–ª–µ—Ü&quot;: &quot;Taurus&quot;,
        &quot;–ë–ª–∏–∑–Ω–µ—Ü—ã&quot;: &quot;Gemini&quot;,
        &quot;–†–∞–∫&quot;: &quot;Cancer&quot;,
        &quot;–õ–µ–≤&quot;: &quot;Leo&quot;,
        &quot;–î–µ–≤–∞&quot;: &quot;Virgo&quot;,
        &quot;–í–µ—Å—ã&quot;: &quot;Libra&quot;,
        &quot;–°–∫–æ—Ä–ø–∏–æ–Ω&quot;: &quot;Scorpio&quot;,
        &quot;–°—Ç—Ä–µ–ª–µ—Ü&quot;: &quot;Sagittarius&quot;,
        &quot;–ö–æ–∑–µ—Ä–æ–≥&quot;: &quot;Capricorn&quot;,
        &quot;–í–æ–¥–æ–ª–µ–π&quot;: &quot;Aquarius&quot;,
        &quot;–†—ã–±—ã&quot;: &quot;Pisces&quot;,
    }

    DAYS = [&quot;TODAY&quot;, &quot;TOMORROW&quot;, &quot;YESTERDAY&quot;]
    </code></pre>
    <h3 id="–∫–æ–º–∞–Ω–¥–∞-start-–∏-hello">–ö–æ–º–∞–Ω–¥–∞ /start –∏ /hello</h3>
    <pre><code class="language-python">@bot.message_handler(commands=[&#39;start&#39;, &#39;hello&#39;])
    def send_welcome(message):
        bot.send_message(message.chat.id, &quot;–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç-–≥–æ—Ä–æ—Å–∫–æ–ø ‚ú®\n–ù–∞–ø–∏—à–∏ /horoscope —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑.&quot;)
    </code></pre>
    <h3 id="–∫–æ–º–∞–Ω–¥–∞-horoscope">–ö–æ–º–∞–Ω–¥–∞ /horoscope</h3>
    <pre><code class="language-python">@bot.message_handler(commands=[&#39;horoscope&#39;])
    def horoscope_handler(message):
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
        for sign in ZODIAC_SIGNS.keys():
            markup.add(sign)
        bot.send_message(message.chat.id, &quot;–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞:&quot;, reply_markup=markup)
        bot.register_next_step_handler(message, ask_day)

    def ask_day(message):
        user_sign = message.text
        if user_sign not in ZODIAC_SIGNS:
            bot.send_message(message.chat.id, &quot;‚ùóÔ∏è –ù–µ–≤–µ—Ä–Ω—ã–π –∑–Ω–∞–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —Å /horoscope&quot;)
            return
        sign_en = ZODIAC_SIGNS[user_sign]

        markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
        markup.row(&quot;TODAY&quot;, &quot;TOMORROW&quot;, &quot;YESTERDAY&quot;)
        bot.send_message(message.chat.id, &quot;–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–Ω—å:&quot;, reply_markup=markup)
        bot.register_next_step_handler(message, fetch_horoscope, sign_en)

    def fetch_horoscope(message, sign_en):
        day = message.text.upper()
        if day not in DAYS:
            bot.send_message(message.chat.id, &quot;‚ùóÔ∏è –ù–µ–≤–µ—Ä–Ω—ã–π –¥–µ–Ω—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —Å /horoscope&quot;)
            return

        horoscope = get_daily_horoscope(sign_en, day)

        if &quot;error&quot; in horoscope:
            bot.send_message(message.chat.id, &quot;üö´ –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≥–æ—Ä–æ—Å–∫–æ–ø–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.&quot;)
            return

        data = horoscope[&quot;data&quot;]
        text = f&quot;üîÆ *–ì–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è {sign_en}*\nüìÖ *{data[&#39;date&#39;]}*\n\n_{data[&#39;horoscope_data&#39;]}_&quot;
        bot.send_message(message.chat.id, text, parse_mode=&quot;Markdown&quot;)
    </code></pre>
    <h3 id="–ø–æ–ª—É—á–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö-–∏–∑-api">–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API</h3>
    <pre><code class="language-python">def get_daily_horoscope(sign: str, day: str) -&gt; dict:
        url = &quot;https://horoscope-app-api.vercel.app/api/v1/get-horoscope/daily&quot;
        params = {&quot;sign&quot;: sign, &quot;day&quot;: day}
        try:
            response = requests.get(url, params=params, timeout=5)
            response.raise_for_status()
            return response.json()
        except requests.exceptions.RequestException as e:
            return {&quot;error&quot;: str(e)}
    </code></pre>
    <h3 id="–æ–±—Ä–∞–±–æ—Ç—á–∏–∫-–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é">–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</h3>
    <pre><code class="language-python">@bot.message_handler(func=lambda msg: True)
    def echo_all(message):
        bot.reply_to(message, &quot;–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –ù–∞–ø–∏—à–∏—Ç–µ /horoscope –¥–ª—è –≥–æ—Ä–æ—Å–∫–æ–ø–∞.&quot;)
    </code></pre>
    <h3 id="–∑–∞–ø—É—Å–∫">–ó–∞–ø—É—Å–∫</h3>
    <pre><code class="language-python">bot.infinity_polling()
    </code></pre>
</section>

<section id="step4">
    <h2 id="—à–∞–≥-4-–∑–∞–ø—É—Å–∫-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–±–æ—Ç–∞">–®–∞–≥ 4. –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞</h2>
    <p>python main.py</p>
    <p>–û—Ç–∫—Ä–æ–π—Ç–µ Telegram, –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ /start –∏ —Å–ª–µ–¥—É–π—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º.</p>

    <h2 id="–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</h2>
    <h3 id="—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</h3>
    <p><pre>src/
    ‚îú‚îÄ‚îÄ main.py
    ‚îú‚îÄ‚îÄ .env</pre></p>

    <h3 id="–¥–∏–∞–≥—Ä–∞–º–º–∞-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏">–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h3>
    <p>sequenceDiagram
        participant User
        participant Bot
        participant API</p>
    <pre><code>User-&gt;&gt;Bot: /horoscope
    Bot-&gt;&gt;User: –í–≤–æ–¥ –∑–Ω–∞–∫–∞
    User-&gt;&gt;Bot: Aries
    Bot-&gt;&gt;User: –í–≤–æ–¥ –¥–Ω—è
    User-&gt;&gt;Bot: Today
    Bot-&gt;&gt;API: –ó–∞–ø—Ä–æ—Å –≥–æ—Ä–æ—Å–∫–æ–ø–∞
    API--&gt;&gt;Bot: –ì–æ—Ä–æ—Å–∫–æ–ø
    Bot-&gt;&gt;User: –û—Ç–≤–µ—Ç —Å –≥–æ—Ä–æ—Å–∫–æ–ø–æ–º
    </code></pre>

    <h3 id="–ø–æ—Ç–æ–∫–æ–≤–∞—è-–¥–∏–∞–≥—Ä–∞–º–º–∞">–ü–æ—Ç–æ–∫–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞</h3>
    <p><pre>flowchart TD

        A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç /horoscope] --&gt; B[–ë–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∑–Ω–∞–∫]
        B --&gt; C[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∑–Ω–∞–∫]
        C --&gt; D[–ë–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞—Ç—É]
        D --&gt; E[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞—Ç—É]
        E --&gt; F[–ë–æ—Ç –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API]
        F --&gt; G[–ü–æ–ª—É—á–∞–µ—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç –≥–æ—Ä–æ—Å–∫–æ–ø]</pre></p>
</section>




    <footer>
        <ul>
            <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li><a href="about.html">–û –ø—Ä–æ–µ–∫—Ç–µ</a></li>
            <li><a href="participants.html">–£—á–∞—Å—Ç–Ω–∏–∫–∏</a></li>
            <li><a href="journal.html">–ñ—É—Ä–Ω–∞–ª</a></li>
            <li><a href="resouces.html">–†–µ—Å—É—Ä—Å—ã</a></li>
            <li><a href="guide.html">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</a></li>
        </ul>
    </footer>    
</body>

</html>